<script>
  // Your published Google Sheet CSV link
  const rawSheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQmgHtycR_r6ysEqMSggWCUo0vl1DVBhjoPeazkZJSpRTxu7xo7tBAG57L2u4zYQAu1UtrIYiRIENyW/pub?gid=0&single=true&output=csv";

  // CORS proxy to allow fetch from GitHub Pages
  const sheetUrl = "https://api.allorigins.win/raw?url=" + encodeURIComponent(rawSheetUrl);

  async function fetchTotal() {
    try {
      const response = await fetch(sheetUrl);
      const text = await response.text();
      const total = parseFloat(text.replace(/[^\d.-]/g, "")) || 0;
      document.getElementById("total").textContent = `-$${total.toLocaleString()}`;
    } catch (error) {
      document.getElementById("total").textContent = "Error loading total";
      console.error(error);
    }
  }

  fetchTotal();
  setInterval(fetchTotal, 60000); // refresh every minute
</script>
